<div id="wide-sidebar" class="row-fluid">
    <div class="span2">
        <ul class="nav nav-tabs nav-stacked">
            <li ng-hide="mode == 'compose' || mode == 'reply'"><a href="#/newConsult">Compose</a></li>
            <li ng-show="mode == 'compose' || mode == 'reply'" class="navigation-active"><a href="#/newConsult">Compose</a></li>
            <li><a href="#/consults/false">Incoming</a></li>
            <li><a href="#/consults/true">Outgoing</a></li>
        </ul>
    </div>
    <div class="span8">
        <div ng-switch="mode">
            <div ng-switch-when="view">
                <table class="table">
                    <tbody>
                    <tr>
                        <td>From</td>
                        <td>{{notification.sender.name}}</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>To</td>
                        <td>{{notification.recipient.name}}</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>Subject</td>
                        <td>{{notification.subject}}</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td colspan="4">{{notification.payload}}</td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <button type="submit" ng-click="reply()" class="btn">Reply</button>
                            <button type="submit" ng-click="cancel()" class="btn">Cancel</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div ng-switch-when="compose">
                <form id="consult">
                    <div class="span5">
                        <div>
                            <input class="span10" placeholder="Recipient Name" type="text"
                                   ng-model="compose.recipient"
                                   typeahead="person as person.name for person in persons | filter:$viewValue">
                        </div>
                        <div>
                            <input class="span10" placeholder="Sender Name" type="text"
                                   ng-model="sender" disabled>
                        </div>
                        <div>
                            <input class="span10" placeholder="Subject" type="text"
                                   ng-model="compose.subject">
                        </div>
                    </div>
                    <!-- span4 -->
                    <div class="row-fluid">
                        <div class="span12">
                            <textarea class="span12" placeholder="Type your questions here..." rows="10"
                                      ng-model="compose.payload">
                            </textarea>
                            <button type="submit" ng-click="send(compose)" class="btn">Send</button>
                            <button type="submit" ng-click="cancel()" class="btn">Cancel</button>
                        </div>
                        <!-- span12 -->
                    </div>
                    <!-- row-fluid -->
                    <span></span>
                </form>
            </div>
            <div ng-switch-when="reply">
                <table class="table">
                    <tbody>
                    <tr>
                        <td>From</td>
                        <td>{{notification.sender.name}}</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>To</td>
                        <td>{{notification.recipient.name}}</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>Subject</td>
                        <td>{{notification.subject}}</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td colspan="4">{{notification.payload}}</td>
                    </tr>
                    </tbody>
                </table>
                <form id="reply-consult">
                    <div class="span5">
                        <div>
                            <input class="span10" placeholder="Recipient Name" type="text"
                                   ng-model="recipient" disabled>
                        </div>
                        <div>
                            <input class="span10" placeholder="Sender Name" type="text"
                                   ng-model="sender" disabled>
                        </div>
                        <div>
                            <input class="span10" placeholder="Subject" type="text"
                                   ng-model="subject" disabled>
                        </div>
                    </div>
                    <!-- span4 -->
                    <div class="row-fluid">
                        <div class="span12">
                            <textarea class="span12" placeholder="Type your questions here..." rows="10"
                                      ng-model="payload">
                            </textarea>
                            <button type="submit" ng-click="send(subject, payload)" class="btn">Send</button>
                            <button type="submit" ng-click="cancel()" class="btn">Cancel</button>
                        </div>
                        <!-- span12 -->
                    </div>
                    <!-- row-fluid -->
                    <span></span>
                </form>
            </div>
        </div>
    </div>
</div>
